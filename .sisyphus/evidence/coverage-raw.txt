============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.2, pluggy-1.6.0
rootdir: /home/joao/dev/workspace/lilya
configfile: pyproject.toml
plugins: mock-3.15.1, xdist-3.8.0, cov-4.1.0, rerunfailures-14.0, asyncio-1.3.0, Faker-40.4.0, anyio-4.12.1
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 3165 items

tests/app_settings/test_settings.py .........................            [  0%]
tests/app_settings/test_settings_module_string.py ......                 [  0%]
tests/asgi/test_add_asgi_app.py .....                                    [  1%]
tests/authentication/test_authentication_backend.py .........            [  1%]
tests/authentication/test_authentication_middleware.py ..........        [  1%]
tests/caches/test_cache_with_handlers.py ......                          [  1%]
tests/caches/test_core.py .E.E                                           [  2%]
tests/caches/test_decorator.py .E.E.E.E....E                             [  2%]
tests/caches/test_integration.py EE                                      [  2%]
tests/cli/global_context/test_global_context_with_directive.py .         [  2%]
tests/cli/simple/test_createdeployment.py ...                            [  2%]
tests/cli/simple/test_createdeployment_with_different_name.py ...        [  2%]
tests/cli/simple/test_createproject_simple.py ....                       [  2%]
tests/cli/simple/test_createproject_with_deployment.py ....              [  3%]
tests/cli/simple/test_createproject_with_deployment_folder_name.py ....  [  3%]
tests/cli/simple/test_custom_directive.py s                              [  3%]
tests/cli/simple/test_custom_directive_decorator.py s                    [  3%]
tests/cli/simple/test_directives.py ...                                  [  3%]
tests/cli/test_createapp.py ....                                         [  3%]
tests/cli/test_createapp_with_location.py ...                            [  3%]
tests/cli/test_createapp_with_version.py ...                             [  3%]
tests/cli/test_createdeployment.py ...                                   [  3%]
tests/cli/test_createdeployment_isolated.py ...                          [  3%]
tests/cli/test_createdeployment_isolated_with_different_name.py ...      [  3%]
tests/cli/test_createdeployment_with_different_name.py ...               [  3%]
tests/cli/test_createproject.py .....                                    [  4%]
tests/cli/test_createproject_edgy.py ....                                [  4%]
tests/cli/test_createproject_with_deployment.py ....                     [  4%]
tests/cli/test_createproject_with_deployment_folder_name.py ....         [  4%]
tests/cli/test_createproject_with_location.py ....                       [  4%]
tests/cli/test_custom_directive.py s                                     [  4%]
tests/cli/test_custom_directive_decorator.py s                           [  4%]
tests/cli/test_custom_directive_decorator_on_cli.py .                    [  4%]
tests/cli/test_custom_directive_normal.py .                              [  4%]
tests/cli/test_directives.py ...                                         [  4%]
tests/cli/test_mail_directive.py ...                                     [  4%]
tests/cli/test_runserver.py ........                                     [  5%]
tests/contrib/cqrs/integration/test_cqrs_lilya_default_buses.py ..       [  5%]
tests/contrib/cqrs/integration/test_cqrs_lilya_endpoints_middleware.py . [  5%]
.                                                                        [  5%]
tests/contrib/cqrs/integration/test_lilya_integration_endpoints.py ..... [  5%]
.                                                                        [  5%]
tests/contrib/cqrs/test_bus_command.py ..........                        [  5%]
tests/contrib/cqrs/test_bus_query.py ..........                          [  6%]
tests/contrib/cqrs/test_concurrency_sanity.py ..                         [  6%]
tests/contrib/cqrs/test_decorators_default_buses.py ......               [  6%]
tests/contrib/cqrs/test_envelope_roundtrip.py ....                       [  6%]
tests/contrib/cqrs/test_integration_command_query_together.py ..         [  6%]
tests/contrib/cqrs/test_middleware_pipeline.py ........                  [  6%]
tests/contrib/cqrs/test_registry.py ....                                 [  6%]
tests/contrib/files/test_send_file.py ..........                         [  7%]
tests/contrib/files/test_send_file_filename_behavior.py ....             [  7%]
tests/contrib/mail/test_backends_console.py ......                       [  7%]
tests/contrib/mail/test_backends_file.py ..........                      [  7%]
tests/contrib/mail/test_backends_inmemory.py ......                      [  8%]
tests/contrib/mail/test_backends_smtp.py ..........                      [  8%]
tests/contrib/mail/test_mail_dependencies.py .......                     [  8%]
tests/contrib/mail/test_mailer.py ................                       [  9%]
tests/contrib/mail/test_message.py .......                               [  9%]
tests/contrib/mail/test_templates.py ...                                 [  9%]
tests/contrib/opentelemetry/test_config.py ..                            [  9%]
tests/contrib/opentelemetry/test_instrumentation.py ....                 [  9%]
tests/contrib/opentelemetry/test_opentelemetry.py .                      [  9%]
tests/contrib/opentelemetry/test_opentelemetry_middleware.py ........... [ 10%]
............                                                             [ 10%]
tests/contrib/proxy/test_relay.py ..........................             [ 11%]
tests/contrib/proxy/test_relay_websockets.py .                           [ 11%]
tests/contrib/schedulers/asyncz/test_scheduler.py ......                 [ 11%]
tests/contrib/shortcuts/test_abort.py ..................                 [ 12%]
tests/contrib/shortcuts/test_shortcuts.py ........................       [ 12%]
tests/contrib/signed_urls/test_signed_redirect.py .......                [ 13%]
tests/contrib/signed_urls/test_signed_redirect_di.py .....               [ 13%]
tests/contrib/signed_urls/test_signed_urls.py ..................         [ 13%]
tests/contrib/sse/test_channels.py ................                      [ 14%]
tests/dependencies/controllers/test_complex_deps.py ..                   [ 14%]
tests/dependencies/controllers/test_dependencies.py .................... [ 14%]
..............                                                           [ 15%]
tests/dependencies/controllers/test_dependencies_without_provides.py ... [ 15%]
...............................                                          [ 16%]
tests/dependencies/controllers/test_gen_apis_cbv.py ....                 [ 16%]
tests/dependencies/controllers/test_wrap_dependency.py ................. [ 17%]
.................                                                        [ 17%]
tests/dependencies/overrides/test_dependency_overrides.py ..........     [ 17%]
tests/dependencies/resolve/controllers/test_nested.py ..                 [ 18%]
tests/dependencies/resolve/controllers/test_resolve.py ....              [ 18%]
tests/dependencies/resolve/controllers/test_simple.py ..                 [ 18%]
tests/dependencies/resolve/controllers/test_simple_gen.py ..             [ 18%]
tests/dependencies/resolve/test_nested.py ..                             [ 18%]
tests/dependencies/resolve/test_resolve.py ....                          [ 18%]
tests/dependencies/resolve/test_simple.py ..                             [ 18%]
tests/dependencies/resolve/test_simple_gen.py ..                         [ 18%]
tests/dependencies/resolve/test_simple_websocket.py ..                   [ 18%]
tests/dependencies/scopes/test_dependency_scopes.py ..............       [ 19%]
tests/dependencies/scopes/test_depends_and_inject_integration.py ....... [ 19%]
...................                                                      [ 19%]
tests/dependencies/scopes/test_provide_and_provides.py ................. [ 20%]
...............                                                          [ 20%]
tests/dependencies/test_complex_deps.py .                                [ 20%]
tests/dependencies/test_dependencies.py ................................ [ 21%]
........                                                                 [ 22%]
tests/dependencies/test_dependencies_without_provides.py ............... [ 22%]
.......................                                                  [ 23%]
tests/dependencies/test_depends_pure.py .....................            [ 24%]
tests/dependencies/test_gen_apis.py ....                                 [ 24%]
tests/dependencies/test_precedence.py ...................                [ 24%]
tests/dependencies/test_provide_generator.py ...                         [ 24%]
tests/dependencies/test_wrap_dependency.py ............................. [ 25%]
.........                                                                [ 26%]
tests/encoders/controllers/test_encoders.py .................            [ 26%]
tests/encoders/controllers/test_encoders_with_dependency.py ....         [ 26%]
tests/encoders/controllers/test_infer_body.py ........................   [ 27%]
tests/encoders/controllers/test_infer_body_error.py ..                   [ 27%]
tests/encoders/controllers/test_infer_body_simple.py ..                  [ 27%]
tests/encoders/controllers/test_infer_body_simple_validation.py ..       [ 27%]
tests/encoders/test_encoders.py .................                        [ 28%]
tests/encoders/test_encoders_interface.py ....................           [ 28%]
tests/encoders/test_encoders_with_complex_dependency.py ............     [ 29%]
tests/encoders/test_encoders_with_dependency.py ....                     [ 29%]
tests/encoders/test_infer_body.py ........................               [ 30%]
tests/encoders/test_infer_body_error.py ..                               [ 30%]
tests/encoders/test_infer_body_simple.py ..                              [ 30%]
tests/encoders/test_infer_body_simple_param_name.py ....                 [ 30%]
tests/encoders/test_infer_body_simple_validation.py ..                   [ 30%]
tests/encoders/test_infer_body_with_path_param.py ....                   [ 30%]
tests/environments/test_environments.py ..............                   [ 31%]
tests/environments/test_loader_yaml.py ..................                [ 31%]
tests/exception_handlers/test_exception_handlers.py .................... [ 32%]
......                                                                   [ 32%]
tests/exception_handlers/test_raises_exception_in_middleware.py ...      [ 32%]
tests/forms/test_form_controller.py ..................                   [ 33%]
tests/global_settings/test_settings.py ....                              [ 33%]
tests/introspection/test_graph.py ..............................         [ 34%]
tests/lifecycle/test_lifecycle_app_integration.py ....                   [ 34%]
tests/lifecycle/test_lifecycle_hooks.py ....                             [ 34%]
tests/lifecycle/test_lifecycle_nested_routers.py ..                      [ 34%]
tests/lifecycle/test_lifecycle_router_basic.py ..                        [ 34%]
tests/lifespan/test_apps.py ............................................ [ 35%]
..                                                                       [ 36%]
tests/lifespan/test_apps_from_settings.py ........                       [ 36%]
tests/middleware/test_app_settings_middleware.py ......                  [ 36%]
tests/middleware/test_authentication_middleware.py ....                  [ 36%]
tests/middleware/test_clickjacking.py ......                             [ 36%]
tests/middleware/test_clientip.py x...x...                               [ 37%]
tests/middleware/test_compression.py ..........                          [ 37%]
tests/middleware/test_compression_wrap.py ..........                     [ 37%]
tests/middleware/test_cors.py ................................           [ 38%]
tests/middleware/test_create_middleware.py .                             [ 38%]
tests/middleware/test_csrf.py .............................              [ 39%]
tests/middleware/test_define_middleware.py ..                            [ 39%]
tests/middleware/test_https_redirect.py ..                               [ 39%]
tests/middleware/test_permission_with_middleware.py ......               [ 39%]
tests/middleware/test_security.py ....                                   [ 40%]
tests/middleware/test_server_errors.py ............                      [ 40%]
tests/middleware/test_session.py ......................................  [ 41%]
tests/middleware/test_session_fixing.py ..                               [ 41%]
tests/middleware/test_trusted_host.py .......                            [ 41%]
tests/middleware/test_trusted_referrer.py ...............                [ 42%]
tests/middleware/test_wsgi_middleware.py ....................            [ 43%]
tests/middleware/test_wsgi_middleware_str.py ....................        [ 43%]
tests/openapi/controllers/test_openapi.py .............................. [ 44%]
....................                                                     [ 45%]
tests/openapi/controllers/test_responses.py ....                         [ 45%]
tests/openapi/controllers/test_responses_as_list.py ..                   [ 45%]
tests/openapi/controllers/test_responses_as_tuple.py ..                  [ 45%]
tests/openapi/test_openapi.py .......................................... [ 46%]
..........                                                               [ 47%]
tests/openapi/test_responses.py ..                                       [ 47%]
tests/openapi/test_responses_as_list.py ..                               [ 47%]
tests/openapi/test_responses_as_tuple.py ..                              [ 47%]
tests/openapi/test_servers.py ....                                       [ 47%]
tests/params/controllers/test_combined_params.py ..................      [ 48%]
tests/params/controllers/test_cookie.py ....................             [ 48%]
tests/params/controllers/test_headers.py ....................            [ 49%]
tests/params/controllers/test_query_params.py .......................... [ 50%]
..............                                                           [ 50%]
tests/params/test_combined_params.py ..................                  [ 51%]
tests/params/test_cookie.py ................                             [ 51%]
tests/params/test_headers.py ...................                         [ 52%]
tests/params/test_query_params.py ...................................... [ 53%]
......                                                                   [ 53%]
tests/permissions/test_create_permission.py .                            [ 53%]
tests/permissions/test_define_permission.py ..                           [ 53%]
tests/permissions/test_permissions.py ............................       [ 54%]
tests/permissions/test_permissions_in_wrap.py ............               [ 54%]
tests/request_lifecycles/test_all.py .                                   [ 55%]
tests/request_lifecycles/test_all_class.py .                             [ 55%]
tests/request_lifecycles/test_all_class_sync.py .                        [ 55%]
tests/request_lifecycles/test_all_sync.py .                              [ 55%]
tests/request_lifecycles/test_before_after_request.py ...                [ 55%]
tests/routing/test_basic.py ......                                       [ 55%]
tests/routing/test_import_str.py ....                                    [ 55%]
tests/routing/test_include_errors.py .........                           [ 55%]
tests/routing/test_proxy_load.py ..                                      [ 55%]
tests/routing/test_routing.py .......................................... [ 57%]
.................................................                        [ 58%]
tests/routing/test_routing_decorator.py ..                               [ 58%]
tests/routing/test_routing_fall_through.py ....                          [ 58%]
tests/routing/test_routing_sniffing.py ....                              [ 59%]
tests/routing/test_routing_with_lt_gt_syntax.py ........................ [ 59%]
...................................................................      [ 61%]
tests/security/http/test_security_api_key_cookie.py ...                  [ 62%]
tests/security/http/test_security_api_key_cookie_description.py ...      [ 62%]
tests/security/http/test_security_api_key_cookie_optional.py ...         [ 62%]
tests/security/http/test_security_api_key_header.py ...                  [ 62%]
tests/security/http/test_security_api_key_header_description.py ...      [ 62%]
tests/security/http/test_security_api_key_header_optional.py ...         [ 62%]
tests/security/http/test_security_api_key_query.py ...                   [ 62%]
tests/security/http/test_security_api_key_query_description.py ...       [ 62%]
tests/security/http/test_security_api_key_query_optional.py ...          [ 62%]
tests/security/http/test_security_api_key_with_requires.py ...           [ 62%]
tests/security/http/test_security_api_key_with_requires_injects.py ...   [ 62%]
tests/security/http/test_security_http_base.py ...                       [ 63%]
tests/security/http/test_security_http_base_description.py ...           [ 63%]
tests/security/http/test_security_http_base_optional.py ...              [ 63%]
tests/security/http/test_security_http_basic_optional.py .....           [ 63%]
tests/security/http/test_security_http_basic_realm.py .....              [ 63%]
tests/security/http/test_security_http_basic_realm_description.py .....  [ 63%]
tests/security/http/test_security_http_bearer.py ....                    [ 63%]
tests/security/http/test_security_http_bearer_description.py ....        [ 63%]
tests/security/http/test_security_http_bearer_optional.py ....           [ 64%]
tests/security/http/test_security_http_digest.py ....                    [ 64%]
tests/security/http/test_security_http_digest_description.py ....        [ 64%]
tests/security/http/test_security_http_digest_optional.py ....           [ 64%]
tests/security/oauth/test_oauth_code_bearer.py ...                       [ 64%]
tests/security/oauth/test_oauth_code_bearer_desc.py ....                 [ 64%]
tests/security/oauth/test_security_oauth2_optional_desc.py .........     [ 64%]
tests/security/oauth/test_security_oauth2_password_bearer_optional.py .. [ 65%]
..                                                                       [ 65%]
tests/security/oauth/test_security_oauth2_password_bearer_optional_desc.py . [ 65%]
...                                                                      [ 65%]
tests/security/openid/test_security_openid_connect.py ....               [ 65%]
tests/security/openid/test_security_openid_connect_description.py ....   [ 65%]
tests/security/openid/test_security_openid_connect_optional.py ....      [ 65%]
tests/security/test_csrf_utils.py ...                                    [ 65%]
tests/security/test_jwt_token.py .                                       [ 65%]
tests/templates/test_context_processors.py ................              [ 66%]
tests/templates/test_templates.py .................................      [ 67%]
tests/test_background.py ..........                                      [ 67%]
tests/test_client_auth.py ..................                             [ 68%]
tests/test_context.py ..........                                         [ 68%]
tests/test_controllers.py ....................................           [ 69%]
tests/test_datastructures.py ....................................        [ 70%]
tests/test_formparsers.py .............................................. [ 72%]
......................                                                   [ 72%]
tests/test_global_context.py ....                                        [ 73%]
tests/test_jsonify.py ..............                                     [ 73%]
tests/test_logging.py ............                                       [ 73%]
tests/test_make_response.py ..........................................   [ 75%]
tests/test_observable.py .....                                           [ 75%]
tests/test_override_settings.py ........                                 [ 75%]
tests/test_ranges.py ..............                                      [ 76%]
tests/test_representation.py ..                                          [ 76%]
tests/test_request_context.py ...                                        [ 76%]
tests/test_request_flags.py ........                                     [ 76%]
tests/test_requests.py ................................................. [ 78%]
....................................                                     [ 79%]
tests/test_responses.py ................................................ [ 80%]
........................................................................ [ 82%]
........................................................................ [ 85%]
........................................................................ [ 87%]
........................................................................ [ 89%]
........................................................................ [ 92%]
........................................................................ [ 94%]
............................                                             [ 95%]
tests/test_session_context.py ....                                       [ 95%]
tests/test_staticfiles.py .............................................. [ 96%]
................                                                         [ 97%]
tests/test_urls_include.py .....                                         [ 97%]
tests/test_websockets.py ............................................... [ 98%]
..................                                                       [ 99%]
tests/transformers/test_transformers.py ........                         [ 99%]
tests/transformers/test_transformers_not_instance.py ......../home/joao/.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/coverage/report_core.py:113: CoverageWarning: Couldn't parse '/home/joao/dev/workspace/lilya/tests/cli/global_context/myproject/myproject/apps/myapp/tests.py': No source for code: '/home/joao/dev/workspace/lilya/tests/cli/global_context/myproject/myproject/apps/myapp/tests.py'. (couldnt-parse); see https://coverage.readthedocs.io/en/7.13.4/messages.html#warning-couldnt-parse
  coverage._warn(msg, slug="couldnt-parse")
/home/joao/.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/coverage/report_core.py:107: CoverageWarning: Couldn't parse Python file '/home/joao/dev/workspace/lilya/tests/cli/myproject/.gitignore' (couldnt-parse); see https://coverage.readthedocs.io/en/7.13.4/messages.html#warning-couldnt-parse
  coverage._warn(msg, slug="couldnt-parse")
/home/joao/.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/coverage/report_core.py:113: CoverageWarning: Couldn't parse '/home/joao/dev/workspace/lilya/tests/cli/myproject/myproject/apps/auto/myapp/tests.py': No source for code: '/home/joao/dev/workspace/lilya/tests/cli/myproject/myproject/apps/auto/myapp/tests.py'. (couldnt-parse); see https://coverage.readthedocs.io/en/7.13.4/messages.html#warning-couldnt-parse
  coverage._warn(msg, slug="couldnt-parse")
/home/joao/.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/coverage/report_core.py:113: CoverageWarning: Couldn't parse '/home/joao/dev/workspace/lilya/tests/cli/myproject/myproject/apps/auto/myproject/myproject/apps/auto/myapp/tests.py': No source for code: '/home/joao/dev/workspace/lilya/tests/cli/myproject/myproject/apps/auto/myproject/myproject/apps/auto/myapp/tests.py'. (couldnt-parse); see https://coverage.readthedocs.io/en/7.13.4/messages.html#warning-couldnt-parse
  coverage._warn(msg, slug="couldnt-parse")
/home/joao/.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/coverage/report_core.py:113: CoverageWarning: Couldn't parse '/home/joao/dev/workspace/lilya/tests/cli/myproject/myproject/apps/auto/myproject/myproject/apps/auto/myproject/myproject/apps/auto/myapp/tests.py': No source for code: '/home/joao/dev/workspace/lilya/tests/cli/myproject/myproject/apps/auto/myproject/myproject/apps/auto/myproject/myproject/apps/auto/myapp/tests.py'. (couldnt-parse); see https://coverage.readthedocs.io/en/7.13.4/messages.html#warning-couldnt-parse
  coverage._warn(msg, slug="couldnt-parse")
/home/joao/.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/coverage/report_core.py:113: CoverageWarning: Couldn't parse '/home/joao/dev/workspace/lilya/tests/cli/myproject/myproject/apps/myapp/tests.py': No source for code: '/home/joao/dev/workspace/lilya/tests/cli/myproject/myproject/apps/myapp/tests.py'. (couldnt-parse); see https://coverage.readthedocs.io/en/7.13.4/messages.html#warning-couldnt-parse
  coverage._warn(msg, slug="couldnt-parse")
/home/joao/.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/coverage/report_core.py:113: CoverageWarning: Couldn't parse '/home/joao/dev/workspace/lilya/tests/cli/myproject/myproject/apps/myproject/myproject/apps/myapp/tests.py': No source for code: '/home/joao/dev/workspace/lilya/tests/cli/myproject/myproject/apps/myproject/myproject/apps/myapp/tests.py'. (couldnt-parse); see https://coverage.readthedocs.io/en/7.13.4/messages.html#warning-couldnt-parse
  coverage._warn(msg, slug="couldnt-parse")
/home/joao/.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/coverage/report_core.py:113: CoverageWarning: Couldn't parse '/home/joao/dev/workspace/lilya/tests/cli/myproject/myproject/apps/myproject/myproject/apps/myproject/myproject/apps/myapp/tests.py': No source for code: '/home/joao/dev/workspace/lilya/tests/cli/myproject/myproject/apps/myproject/myproject/apps/myproject/myproject/apps/myapp/tests.py'. (couldnt-parse); see https://coverage.readthedocs.io/en/7.13.4/messages.html#warning-couldnt-parse
  coverage._warn(msg, slug="couldnt-parse")
/home/joao/.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/coverage/report_core.py:113: CoverageWarning: Couldn't parse '/home/joao/dev/workspace/lilya/tests/cli/myproject/myproject/apps/myproject/myproject/apps/myproject/myproject/apps/myproject/myproject/apps/another/tests.py': No source for code: '/home/joao/dev/workspace/lilya/tests/cli/myproject/myproject/apps/myproject/myproject/apps/myproject/myproject/apps/myproject/myproject/apps/another/tests.py'. (couldnt-parse); see https://coverage.readthedocs.io/en/7.13.4/messages.html#warning-couldnt-parse
  coverage._warn(msg, slug="couldnt-parse")
/home/joao/.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/coverage/report_core.py:113: CoverageWarning: Couldn't parse '/home/joao/dev/workspace/lilya/tests/cli/myproject/myproject/apps/myproject/myproject/apps/myproject/myproject/apps/myproject/myproject/apps/multiple/tests.py': No source for code: '/home/joao/dev/workspace/lilya/tests/cli/myproject/myproject/apps/myproject/myproject/apps/myproject/myproject/apps/myproject/myproject/apps/multiple/tests.py'. (couldnt-parse); see https://coverage.readthedocs.io/en/7.13.4/messages.html#warning-couldnt-parse
  coverage._warn(msg, slug="couldnt-parse")
/home/joao/.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/coverage/report_core.py:113: CoverageWarning: Couldn't parse '/home/joao/dev/workspace/lilya/tests/cli/myproject/myproject/apps/myproject/myproject/apps/myproject/myproject/apps/myproject/myproject/apps/myapp/tests.py': No source for code: '/home/joao/dev/workspace/lilya/tests/cli/myproject/myproject/apps/myproject/myproject/apps/myproject/myproject/apps/myproject/myproject/apps/myapp/tests.py'. (couldnt-parse); see https://coverage.readthedocs.io/en/7.13.4/messages.html#warning-couldnt-parse
  coverage._warn(msg, slug="couldnt-parse")
/home/joao/.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/coverage/report_core.py:113: CoverageWarning: Couldn't parse '/home/joao/dev/workspace/lilya/tests/cli/simple/myproject/myproject/tests/__init__.py': No source for code: '/home/joao/dev/workspace/lilya/tests/cli/simple/myproject/myproject/tests/__init__.py'. (couldnt-parse); see https://coverage.readthedocs.io/en/7.13.4/messages.html#warning-couldnt-parse
  coverage._warn(msg, slug="couldnt-parse")
/home/joao/.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/coverage/report_core.py:113: CoverageWarning: Couldn't parse '/home/joao/dev/workspace/lilya/tests/cli/simple/myproject/myproject/tests/conftest.py': No source for code: '/home/joao/dev/workspace/lilya/tests/cli/simple/myproject/myproject/tests/conftest.py'. (couldnt-parse); see https://coverage.readthedocs.io/en/7.13.4/messages.html#warning-couldnt-parse
  coverage._warn(msg, slug="couldnt-parse")
/home/joao/.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/coverage/report_core.py:113: CoverageWarning: Couldn't parse '/home/joao/dev/workspace/lilya/tests/cli/simple/myproject/myproject/tests/test_app.py': No source for code: '/home/joao/dev/workspace/lilya/tests/cli/simple/myproject/myproject/tests/test_app.py'. (couldnt-parse); see https://coverage.readthedocs.io/en/7.13.4/messages.html#warning-couldnt-parse
  coverage._warn(msg, slug="couldnt-parse")
            [100%]

==================================== ERRORS ====================================
_____________ ERROR at setup of test_redis_cache_basic_operations ______________

self = <redis.asyncio.connection.Connection(host=localhost,port=6379,db=0)>
check_health = True, retry_socket_connect = True

    async def connect_check_health(
        self, check_health: bool = True, retry_socket_connect: bool = True
    ):
        if self.is_connected:
            return
        try:
            if retry_socket_connect:
>               await self.retry.call_with_retry(
                    lambda: self._connect(), lambda error: self.disconnect()
                )

../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:307: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/retry.py:50: in call_with_retry
    return await do()
           ^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:768: in _connect
    reader, writer = await asyncio.open_connection(
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/streams.py:48: in open_connection
    transport, _ = await loop.create_connection(
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:1122: in create_connection
    raise exceptions[0]
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:1104: in create_connection
    sock = await self._connect_sock(
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:1007: in _connect_sock
    await self.sock_connect(sock, address)
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/selector_events.py:651: in sock_connect
    return await fut
           ^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <_UnixSelectorEventLoop running=False closed=False debug=False>
fut = None, sock = <socket.socket [closed] fd=-1, family=2, type=1, proto=6>
address = ('127.0.0.1', 6379)

    def _sock_connect_cb(self, fut, sock, address):
        if fut.done():
            return
    
        try:
            err = sock.getsockopt(socket.SOL_SOCKET, socket.SO_ERROR)
            if err != 0:
                # Jump to any except clause below.
>               raise OSError(err, f'Connect call failed {address}')
E               ConnectionRefusedError: [Errno 111] Connect call failed ('127.0.0.1', 6379)

../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/selector_events.py:691: ConnectionRefusedError

During handling of the above exception, another exception occurred:

self = <Coroutine test_redis_cache_basic_operations>

    def setup(self) -> None:
        runner_fixture_id = f"_{self._loop_scope}_scoped_runner"
        if runner_fixture_id not in self.fixturenames:
            self.fixturenames.append(runner_fixture_id)
>       return super().setup()
               ^^^^^^^^^^^^^^^

../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:458: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:743: in pytest_fixture_setup
    hook_result = yield
                  ^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:313: in _asyncgen_fixture_wrapper
    result = runner.run(setup(), context=context)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/runners.py:118: in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:687: in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:309: in setup
    res = await gen_obj.__anext__()
          ^^^^^^^^^^^^^^^^^^^^^^^^^
tests/caches/conftest.py:41: in redis_cache
    await cache.async_client.flushdb()  # Ensure a clean test environment
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/client.py:720: in execute_command
    conn = self.connection or await pool.get_connection()
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:1198: in get_connection
    await self.ensure_connection(connection)
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:1231: in ensure_connection
    await connection.connect()
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:298: in connect
    await self.connect_check_health(check_health=True)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <redis.asyncio.connection.Connection(host=localhost,port=6379,db=0)>
check_health = True, retry_socket_connect = True

    async def connect_check_health(
        self, check_health: bool = True, retry_socket_connect: bool = True
    ):
        if self.is_connected:
            return
        try:
            if retry_socket_connect:
                await self.retry.call_with_retry(
                    lambda: self._connect(), lambda error: self.disconnect()
                )
            else:
                await self._connect()
        except asyncio.CancelledError:
            raise  # in 3.7 and earlier, this is an Exception, not BaseException
        except (socket.timeout, asyncio.TimeoutError):
            raise TimeoutError("Timeout connecting to server")
        except OSError as e:
>           raise ConnectionError(self._error_message(e))
E           redis.exceptions.ConnectionError: Error 111 connecting to localhost:6379. Connect call failed ('127.0.0.1', 6379).

../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:317: ConnectionError
________________ ERROR at setup of test_redis_cache_ttl_expiry _________________

self = <redis.asyncio.connection.Connection(host=localhost,port=6379,db=0)>
check_health = True, retry_socket_connect = True

    async def connect_check_health(
        self, check_health: bool = True, retry_socket_connect: bool = True
    ):
        if self.is_connected:
            return
        try:
            if retry_socket_connect:
>               await self.retry.call_with_retry(
                    lambda: self._connect(), lambda error: self.disconnect()
                )

../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:307: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/retry.py:50: in call_with_retry
    return await do()
           ^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:768: in _connect
    reader, writer = await asyncio.open_connection(
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/streams.py:48: in open_connection
    transport, _ = await loop.create_connection(
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:1122: in create_connection
    raise exceptions[0]
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:1104: in create_connection
    sock = await self._connect_sock(
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:1007: in _connect_sock
    await self.sock_connect(sock, address)
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/selector_events.py:651: in sock_connect
    return await fut
           ^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <_UnixSelectorEventLoop running=False closed=False debug=False>
fut = None, sock = <socket.socket [closed] fd=-1, family=2, type=1, proto=6>
address = ('127.0.0.1', 6379)

    def _sock_connect_cb(self, fut, sock, address):
        if fut.done():
            return
    
        try:
            err = sock.getsockopt(socket.SOL_SOCKET, socket.SO_ERROR)
            if err != 0:
                # Jump to any except clause below.
>               raise OSError(err, f'Connect call failed {address}')
E               ConnectionRefusedError: [Errno 111] Connect call failed ('127.0.0.1', 6379)

../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/selector_events.py:691: ConnectionRefusedError

During handling of the above exception, another exception occurred:

self = <Coroutine test_redis_cache_ttl_expiry>

    def setup(self) -> None:
        runner_fixture_id = f"_{self._loop_scope}_scoped_runner"
        if runner_fixture_id not in self.fixturenames:
            self.fixturenames.append(runner_fixture_id)
>       return super().setup()
               ^^^^^^^^^^^^^^^

../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:458: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:743: in pytest_fixture_setup
    hook_result = yield
                  ^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:313: in _asyncgen_fixture_wrapper
    result = runner.run(setup(), context=context)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/runners.py:118: in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:687: in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:309: in setup
    res = await gen_obj.__anext__()
          ^^^^^^^^^^^^^^^^^^^^^^^^^
tests/caches/conftest.py:41: in redis_cache
    await cache.async_client.flushdb()  # Ensure a clean test environment
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/client.py:720: in execute_command
    conn = self.connection or await pool.get_connection()
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:1198: in get_connection
    await self.ensure_connection(connection)
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:1231: in ensure_connection
    await connection.connect()
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:298: in connect
    await self.connect_check_health(check_health=True)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <redis.asyncio.connection.Connection(host=localhost,port=6379,db=0)>
check_health = True, retry_socket_connect = True

    async def connect_check_health(
        self, check_health: bool = True, retry_socket_connect: bool = True
    ):
        if self.is_connected:
            return
        try:
            if retry_socket_connect:
                await self.retry.call_with_retry(
                    lambda: self._connect(), lambda error: self.disconnect()
                )
            else:
                await self._connect()
        except asyncio.CancelledError:
            raise  # in 3.7 and earlier, this is an Exception, not BaseException
        except (socket.timeout, asyncio.TimeoutError):
            raise TimeoutError("Timeout connecting to server")
        except OSError as e:
>           raise ConnectionError(self._error_message(e))
E           redis.exceptions.ConnectionError: Error 111 connecting to localhost:6379. Connect call failed ('127.0.0.1', 6379).

../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:317: ConnectionError
______________ ERROR at setup of test_basic_caching_memory_redis _______________

self = <redis.asyncio.connection.Connection(host=localhost,port=6379,db=0)>
check_health = True, retry_socket_connect = True

    async def connect_check_health(
        self, check_health: bool = True, retry_socket_connect: bool = True
    ):
        if self.is_connected:
            return
        try:
            if retry_socket_connect:
>               await self.retry.call_with_retry(
                    lambda: self._connect(), lambda error: self.disconnect()
                )

../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:307: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/retry.py:50: in call_with_retry
    return await do()
           ^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:768: in _connect
    reader, writer = await asyncio.open_connection(
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/streams.py:48: in open_connection
    transport, _ = await loop.create_connection(
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:1122: in create_connection
    raise exceptions[0]
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:1104: in create_connection
    sock = await self._connect_sock(
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:1007: in _connect_sock
    await self.sock_connect(sock, address)
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/selector_events.py:651: in sock_connect
    return await fut
           ^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <_UnixSelectorEventLoop running=False closed=False debug=False>
fut = None, sock = <socket.socket [closed] fd=-1, family=2, type=1, proto=6>
address = ('127.0.0.1', 6379)

    def _sock_connect_cb(self, fut, sock, address):
        if fut.done():
            return
    
        try:
            err = sock.getsockopt(socket.SOL_SOCKET, socket.SO_ERROR)
            if err != 0:
                # Jump to any except clause below.
>               raise OSError(err, f'Connect call failed {address}')
E               ConnectionRefusedError: [Errno 111] Connect call failed ('127.0.0.1', 6379)

../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/selector_events.py:691: ConnectionRefusedError

During handling of the above exception, another exception occurred:

fixturedef = <FixtureDef argname='redis_cache' scope='function' baseid='tests/caches'>
request = <SubRequest 'redis_cache' for <Function test_basic_caching_memory_redis>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
                return (yield)
            if not _is_coroutine_or_asyncgen(fixturedef.func):
                return (yield)
        default_loop_scope = request.config.getini("asyncio_default_fixture_loop_scope")
        loop_scope = (
            getattr(fixturedef.func, "_loop_scope", None)
            or default_loop_scope
            or fixturedef.scope
        )
        runner_fixture_id = f"_{loop_scope}_scoped_runner"
        runner = request.getfixturevalue(runner_fixture_id)
        synchronizer = _fixture_synchronizer(fixturedef, runner, request)
        _make_asyncio_fixture_function(synchronizer, loop_scope)
        with MonkeyPatch.context() as c:
            c.setattr(fixturedef, "func", synchronizer)
>           hook_result = yield
                          ^^^^^

../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:743: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:313: in _asyncgen_fixture_wrapper
    result = runner.run(setup(), context=context)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/runners.py:118: in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:687: in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:309: in setup
    res = await gen_obj.__anext__()
          ^^^^^^^^^^^^^^^^^^^^^^^^^
tests/caches/conftest.py:41: in redis_cache
    await cache.async_client.flushdb()  # Ensure a clean test environment
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/client.py:720: in execute_command
    conn = self.connection or await pool.get_connection()
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:1198: in get_connection
    await self.ensure_connection(connection)
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:1231: in ensure_connection
    await connection.connect()
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:298: in connect
    await self.connect_check_health(check_health=True)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <redis.asyncio.connection.Connection(host=localhost,port=6379,db=0)>
check_health = True, retry_socket_connect = True

    async def connect_check_health(
        self, check_health: bool = True, retry_socket_connect: bool = True
    ):
        if self.is_connected:
            return
        try:
            if retry_socket_connect:
                await self.retry.call_with_retry(
                    lambda: self._connect(), lambda error: self.disconnect()
                )
            else:
                await self._connect()
        except asyncio.CancelledError:
            raise  # in 3.7 and earlier, this is an Exception, not BaseException
        except (socket.timeout, asyncio.TimeoutError):
            raise TimeoutError("Timeout connecting to server")
        except OSError as e:
>           raise ConnectionError(self._error_message(e))
E           redis.exceptions.ConnectionError: Error 111 connecting to localhost:6379. Connect call failed ('127.0.0.1', 6379).

../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:317: ConnectionError
__________________ ERROR at setup of test_cache_expiry_redis ___________________

self = <redis.asyncio.connection.Connection(host=localhost,port=6379,db=0)>
check_health = True, retry_socket_connect = True

    async def connect_check_health(
        self, check_health: bool = True, retry_socket_connect: bool = True
    ):
        if self.is_connected:
            return
        try:
            if retry_socket_connect:
>               await self.retry.call_with_retry(
                    lambda: self._connect(), lambda error: self.disconnect()
                )

../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:307: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/retry.py:50: in call_with_retry
    return await do()
           ^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:768: in _connect
    reader, writer = await asyncio.open_connection(
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/streams.py:48: in open_connection
    transport, _ = await loop.create_connection(
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:1122: in create_connection
    raise exceptions[0]
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:1104: in create_connection
    sock = await self._connect_sock(
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:1007: in _connect_sock
    await self.sock_connect(sock, address)
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/selector_events.py:651: in sock_connect
    return await fut
           ^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <_UnixSelectorEventLoop running=False closed=False debug=False>
fut = None, sock = <socket.socket [closed] fd=-1, family=2, type=1, proto=6>
address = ('127.0.0.1', 6379)

    def _sock_connect_cb(self, fut, sock, address):
        if fut.done():
            return
    
        try:
            err = sock.getsockopt(socket.SOL_SOCKET, socket.SO_ERROR)
            if err != 0:
                # Jump to any except clause below.
>               raise OSError(err, f'Connect call failed {address}')
E               ConnectionRefusedError: [Errno 111] Connect call failed ('127.0.0.1', 6379)

../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/selector_events.py:691: ConnectionRefusedError

During handling of the above exception, another exception occurred:

self = <Coroutine test_cache_expiry_redis>

    def setup(self) -> None:
        runner_fixture_id = f"_{self._loop_scope}_scoped_runner"
        if runner_fixture_id not in self.fixturenames:
            self.fixturenames.append(runner_fixture_id)
>       return super().setup()
               ^^^^^^^^^^^^^^^

../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:458: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:743: in pytest_fixture_setup
    hook_result = yield
                  ^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:313: in _asyncgen_fixture_wrapper
    result = runner.run(setup(), context=context)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/runners.py:118: in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:687: in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:309: in setup
    res = await gen_obj.__anext__()
          ^^^^^^^^^^^^^^^^^^^^^^^^^
tests/caches/conftest.py:41: in redis_cache
    await cache.async_client.flushdb()  # Ensure a clean test environment
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/client.py:720: in execute_command
    conn = self.connection or await pool.get_connection()
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:1198: in get_connection
    await self.ensure_connection(connection)
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:1231: in ensure_connection
    await connection.connect()
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:298: in connect
    await self.connect_check_health(check_health=True)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <redis.asyncio.connection.Connection(host=localhost,port=6379,db=0)>
check_health = True, retry_socket_connect = True

    async def connect_check_health(
        self, check_health: bool = True, retry_socket_connect: bool = True
    ):
        if self.is_connected:
            return
        try:
            if retry_socket_connect:
                await self.retry.call_with_retry(
                    lambda: self._connect(), lambda error: self.disconnect()
                )
            else:
                await self._connect()
        except asyncio.CancelledError:
            raise  # in 3.7 and earlier, this is an Exception, not BaseException
        except (socket.timeout, asyncio.TimeoutError):
            raise TimeoutError("Timeout connecting to server")
        except OSError as e:
>           raise ConnectionError(self._error_message(e))
E           redis.exceptions.ConnectionError: Error 111 connecting to localhost:6379. Connect call failed ('127.0.0.1', 6379).

../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:317: ConnectionError
______________ ERROR at setup of test_cache_key_generation_redis _______________

self = <redis.asyncio.connection.Connection(host=localhost,port=6379,db=0)>
check_health = True, retry_socket_connect = True

    async def connect_check_health(
        self, check_health: bool = True, retry_socket_connect: bool = True
    ):
        if self.is_connected:
            return
        try:
            if retry_socket_connect:
>               await self.retry.call_with_retry(
                    lambda: self._connect(), lambda error: self.disconnect()
                )

../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:307: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/retry.py:50: in call_with_retry
    return await do()
           ^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:768: in _connect
    reader, writer = await asyncio.open_connection(
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/streams.py:48: in open_connection
    transport, _ = await loop.create_connection(
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:1122: in create_connection
    raise exceptions[0]
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:1104: in create_connection
    sock = await self._connect_sock(
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:1007: in _connect_sock
    await self.sock_connect(sock, address)
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/selector_events.py:651: in sock_connect
    return await fut
           ^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <_UnixSelectorEventLoop running=False closed=False debug=False>
fut = None, sock = <socket.socket [closed] fd=-1, family=2, type=1, proto=6>
address = ('127.0.0.1', 6379)

    def _sock_connect_cb(self, fut, sock, address):
        if fut.done():
            return
    
        try:
            err = sock.getsockopt(socket.SOL_SOCKET, socket.SO_ERROR)
            if err != 0:
                # Jump to any except clause below.
>               raise OSError(err, f'Connect call failed {address}')
E               ConnectionRefusedError: [Errno 111] Connect call failed ('127.0.0.1', 6379)

../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/selector_events.py:691: ConnectionRefusedError

During handling of the above exception, another exception occurred:

self = <Coroutine test_cache_key_generation_redis>

    def setup(self) -> None:
        runner_fixture_id = f"_{self._loop_scope}_scoped_runner"
        if runner_fixture_id not in self.fixturenames:
            self.fixturenames.append(runner_fixture_id)
>       return super().setup()
               ^^^^^^^^^^^^^^^

../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:458: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:743: in pytest_fixture_setup
    hook_result = yield
                  ^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:313: in _asyncgen_fixture_wrapper
    result = runner.run(setup(), context=context)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/runners.py:118: in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:687: in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:309: in setup
    res = await gen_obj.__anext__()
          ^^^^^^^^^^^^^^^^^^^^^^^^^
tests/caches/conftest.py:41: in redis_cache
    await cache.async_client.flushdb()  # Ensure a clean test environment
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/client.py:720: in execute_command
    conn = self.connection or await pool.get_connection()
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:1198: in get_connection
    await self.ensure_connection(connection)
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:1231: in ensure_connection
    await connection.connect()
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:298: in connect
    await self.connect_check_health(check_health=True)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <redis.asyncio.connection.Connection(host=localhost,port=6379,db=0)>
check_health = True, retry_socket_connect = True

    async def connect_check_health(
        self, check_health: bool = True, retry_socket_connect: bool = True
    ):
        if self.is_connected:
            return
        try:
            if retry_socket_connect:
                await self.retry.call_with_retry(
                    lambda: self._connect(), lambda error: self.disconnect()
                )
            else:
                await self._connect()
        except asyncio.CancelledError:
            raise  # in 3.7 and earlier, this is an Exception, not BaseException
        except (socket.timeout, asyncio.TimeoutError):
            raise TimeoutError("Timeout connecting to server")
        except OSError as e:
>           raise ConnectionError(self._error_message(e))
E           redis.exceptions.ConnectionError: Error 111 connecting to localhost:6379. Connect call failed ('127.0.0.1', 6379).

../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:317: ConnectionError
_______________ ERROR at setup of test_cache_invalidation_redis ________________

self = <redis.asyncio.connection.Connection(host=localhost,port=6379,db=0)>
check_health = True, retry_socket_connect = True

    async def connect_check_health(
        self, check_health: bool = True, retry_socket_connect: bool = True
    ):
        if self.is_connected:
            return
        try:
            if retry_socket_connect:
>               await self.retry.call_with_retry(
                    lambda: self._connect(), lambda error: self.disconnect()
                )

../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:307: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/retry.py:50: in call_with_retry
    return await do()
           ^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:768: in _connect
    reader, writer = await asyncio.open_connection(
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/streams.py:48: in open_connection
    transport, _ = await loop.create_connection(
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:1122: in create_connection
    raise exceptions[0]
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:1104: in create_connection
    sock = await self._connect_sock(
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:1007: in _connect_sock
    await self.sock_connect(sock, address)
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/selector_events.py:651: in sock_connect
    return await fut
           ^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <_UnixSelectorEventLoop running=False closed=False debug=False>
fut = None, sock = <socket.socket [closed] fd=-1, family=2, type=1, proto=6>
address = ('127.0.0.1', 6379)

    def _sock_connect_cb(self, fut, sock, address):
        if fut.done():
            return
    
        try:
            err = sock.getsockopt(socket.SOL_SOCKET, socket.SO_ERROR)
            if err != 0:
                # Jump to any except clause below.
>               raise OSError(err, f'Connect call failed {address}')
E               ConnectionRefusedError: [Errno 111] Connect call failed ('127.0.0.1', 6379)

../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/selector_events.py:691: ConnectionRefusedError

During handling of the above exception, another exception occurred:

self = <Coroutine test_cache_invalidation_redis>

    def setup(self) -> None:
        runner_fixture_id = f"_{self._loop_scope}_scoped_runner"
        if runner_fixture_id not in self.fixturenames:
            self.fixturenames.append(runner_fixture_id)
>       return super().setup()
               ^^^^^^^^^^^^^^^

../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:458: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:743: in pytest_fixture_setup
    hook_result = yield
                  ^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:313: in _asyncgen_fixture_wrapper
    result = runner.run(setup(), context=context)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/runners.py:118: in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:687: in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:309: in setup
    res = await gen_obj.__anext__()
          ^^^^^^^^^^^^^^^^^^^^^^^^^
tests/caches/conftest.py:41: in redis_cache
    await cache.async_client.flushdb()  # Ensure a clean test environment
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/client.py:720: in execute_command
    conn = self.connection or await pool.get_connection()
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:1198: in get_connection
    await self.ensure_connection(connection)
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:1231: in ensure_connection
    await connection.connect()
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:298: in connect
    await self.connect_check_health(check_health=True)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <redis.asyncio.connection.Connection(host=localhost,port=6379,db=0)>
check_health = True, retry_socket_connect = True

    async def connect_check_health(
        self, check_health: bool = True, retry_socket_connect: bool = True
    ):
        if self.is_connected:
            return
        try:
            if retry_socket_connect:
                await self.retry.call_with_retry(
                    lambda: self._connect(), lambda error: self.disconnect()
                )
            else:
                await self._connect()
        except asyncio.CancelledError:
            raise  # in 3.7 and earlier, this is an Exception, not BaseException
        except (socket.timeout, asyncio.TimeoutError):
            raise TimeoutError("Timeout connecting to server")
        except OSError as e:
>           raise ConnectionError(self._error_message(e))
E           redis.exceptions.ConnectionError: Error 111 connecting to localhost:6379. Connect call failed ('127.0.0.1', 6379).

../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:317: ConnectionError
______________ ERROR at setup of test_lilya_integration_in_redis _______________

self = <redis.asyncio.connection.Connection(host=localhost,port=6379,db=0)>
check_health = True, retry_socket_connect = True

    async def connect_check_health(
        self, check_health: bool = True, retry_socket_connect: bool = True
    ):
        if self.is_connected:
            return
        try:
            if retry_socket_connect:
>               await self.retry.call_with_retry(
                    lambda: self._connect(), lambda error: self.disconnect()
                )

../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:307: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/retry.py:50: in call_with_retry
    return await do()
           ^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:768: in _connect
    reader, writer = await asyncio.open_connection(
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/streams.py:48: in open_connection
    transport, _ = await loop.create_connection(
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:1122: in create_connection
    raise exceptions[0]
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:1104: in create_connection
    sock = await self._connect_sock(
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:1007: in _connect_sock
    await self.sock_connect(sock, address)
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/selector_events.py:651: in sock_connect
    return await fut
           ^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <_UnixSelectorEventLoop running=False closed=False debug=False>
fut = None, sock = <socket.socket [closed] fd=-1, family=2, type=1, proto=6>
address = ('127.0.0.1', 6379)

    def _sock_connect_cb(self, fut, sock, address):
        if fut.done():
            return
    
        try:
            err = sock.getsockopt(socket.SOL_SOCKET, socket.SO_ERROR)
            if err != 0:
                # Jump to any except clause below.
>               raise OSError(err, f'Connect call failed {address}')
E               ConnectionRefusedError: [Errno 111] Connect call failed ('127.0.0.1', 6379)

../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/selector_events.py:691: ConnectionRefusedError

During handling of the above exception, another exception occurred:

self = <Coroutine test_lilya_integration_in_redis>

    def setup(self) -> None:
        runner_fixture_id = f"_{self._loop_scope}_scoped_runner"
        if runner_fixture_id not in self.fixturenames:
            self.fixturenames.append(runner_fixture_id)
>       return super().setup()
               ^^^^^^^^^^^^^^^

../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:458: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:743: in pytest_fixture_setup
    hook_result = yield
                  ^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:313: in _asyncgen_fixture_wrapper
    result = runner.run(setup(), context=context)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/runners.py:118: in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:687: in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:309: in setup
    res = await gen_obj.__anext__()
          ^^^^^^^^^^^^^^^^^^^^^^^^^
tests/caches/conftest.py:41: in redis_cache
    await cache.async_client.flushdb()  # Ensure a clean test environment
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/client.py:720: in execute_command
    conn = self.connection or await pool.get_connection()
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:1198: in get_connection
    await self.ensure_connection(connection)
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:1231: in ensure_connection
    await connection.connect()
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:298: in connect
    await self.connect_check_health(check_health=True)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <redis.asyncio.connection.Connection(host=localhost,port=6379,db=0)>
check_health = True, retry_socket_connect = True

    async def connect_check_health(
        self, check_health: bool = True, retry_socket_connect: bool = True
    ):
        if self.is_connected:
            return
        try:
            if retry_socket_connect:
                await self.retry.call_with_retry(
                    lambda: self._connect(), lambda error: self.disconnect()
                )
            else:
                await self._connect()
        except asyncio.CancelledError:
            raise  # in 3.7 and earlier, this is an Exception, not BaseException
        except (socket.timeout, asyncio.TimeoutError):
            raise TimeoutError("Timeout connecting to server")
        except OSError as e:
>           raise ConnectionError(self._error_message(e))
E           redis.exceptions.ConnectionError: Error 111 connecting to localhost:6379. Connect call failed ('127.0.0.1', 6379).

../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:317: ConnectionError
_________________ ERROR at setup of test_esmerald_memory_cache _________________

self = <redis.asyncio.connection.Connection(host=localhost,port=6379,db=0)>
check_health = True, retry_socket_connect = True

    async def connect_check_health(
        self, check_health: bool = True, retry_socket_connect: bool = True
    ):
        if self.is_connected:
            return
        try:
            if retry_socket_connect:
>               await self.retry.call_with_retry(
                    lambda: self._connect(), lambda error: self.disconnect()
                )

../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:307: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/retry.py:50: in call_with_retry
    return await do()
           ^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:768: in _connect
    reader, writer = await asyncio.open_connection(
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/streams.py:48: in open_connection
    transport, _ = await loop.create_connection(
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:1122: in create_connection
    raise exceptions[0]
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:1104: in create_connection
    sock = await self._connect_sock(
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:1007: in _connect_sock
    await self.sock_connect(sock, address)
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/selector_events.py:651: in sock_connect
    return await fut
           ^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <_UnixSelectorEventLoop running=False closed=False debug=False>
fut = None, sock = <socket.socket [closed] fd=-1, family=2, type=1, proto=6>
address = ('127.0.0.1', 6379)

    def _sock_connect_cb(self, fut, sock, address):
        if fut.done():
            return
    
        try:
            err = sock.getsockopt(socket.SOL_SOCKET, socket.SO_ERROR)
            if err != 0:
                # Jump to any except clause below.
>               raise OSError(err, f'Connect call failed {address}')
E               ConnectionRefusedError: [Errno 111] Connect call failed ('127.0.0.1', 6379)

../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/selector_events.py:691: ConnectionRefusedError

During handling of the above exception, another exception occurred:

fixturedef = <FixtureDef argname='redis_cache' scope='function' baseid='tests/caches'>
request = <SubRequest 'redis_cache' for <Function test_esmerald_memory_cache>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
                return (yield)
            if not _is_coroutine_or_asyncgen(fixturedef.func):
                return (yield)
        default_loop_scope = request.config.getini("asyncio_default_fixture_loop_scope")
        loop_scope = (
            getattr(fixturedef.func, "_loop_scope", None)
            or default_loop_scope
            or fixturedef.scope
        )
        runner_fixture_id = f"_{loop_scope}_scoped_runner"
        runner = request.getfixturevalue(runner_fixture_id)
        synchronizer = _fixture_synchronizer(fixturedef, runner, request)
        _make_asyncio_fixture_function(synchronizer, loop_scope)
        with MonkeyPatch.context() as c:
            c.setattr(fixturedef, "func", synchronizer)
>           hook_result = yield
                          ^^^^^

../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:743: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:313: in _asyncgen_fixture_wrapper
    result = runner.run(setup(), context=context)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/runners.py:118: in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:687: in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:309: in setup
    res = await gen_obj.__anext__()
          ^^^^^^^^^^^^^^^^^^^^^^^^^
tests/caches/conftest.py:41: in redis_cache
    await cache.async_client.flushdb()  # Ensure a clean test environment
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/client.py:720: in execute_command
    conn = self.connection or await pool.get_connection()
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:1198: in get_connection
    await self.ensure_connection(connection)
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:1231: in ensure_connection
    await connection.connect()
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:298: in connect
    await self.connect_check_health(check_health=True)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <redis.asyncio.connection.Connection(host=localhost,port=6379,db=0)>
check_health = True, retry_socket_connect = True

    async def connect_check_health(
        self, check_health: bool = True, retry_socket_connect: bool = True
    ):
        if self.is_connected:
            return
        try:
            if retry_socket_connect:
                await self.retry.call_with_retry(
                    lambda: self._connect(), lambda error: self.disconnect()
                )
            else:
                await self._connect()
        except asyncio.CancelledError:
            raise  # in 3.7 and earlier, this is an Exception, not BaseException
        except (socket.timeout, asyncio.TimeoutError):
            raise TimeoutError("Timeout connecting to server")
        except OSError as e:
>           raise ConnectionError(self._error_message(e))
E           redis.exceptions.ConnectionError: Error 111 connecting to localhost:6379. Connect call failed ('127.0.0.1', 6379).

../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:317: ConnectionError
_________________ ERROR at setup of test_esmerald_redis_cache __________________

self = <redis.asyncio.connection.Connection(host=localhost,port=6379,db=0)>
check_health = True, retry_socket_connect = True

    async def connect_check_health(
        self, check_health: bool = True, retry_socket_connect: bool = True
    ):
        if self.is_connected:
            return
        try:
            if retry_socket_connect:
>               await self.retry.call_with_retry(
                    lambda: self._connect(), lambda error: self.disconnect()
                )

../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:307: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/retry.py:50: in call_with_retry
    return await do()
           ^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:768: in _connect
    reader, writer = await asyncio.open_connection(
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/streams.py:48: in open_connection
    transport, _ = await loop.create_connection(
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:1122: in create_connection
    raise exceptions[0]
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:1104: in create_connection
    sock = await self._connect_sock(
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:1007: in _connect_sock
    await self.sock_connect(sock, address)
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/selector_events.py:651: in sock_connect
    return await fut
           ^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <_UnixSelectorEventLoop running=False closed=False debug=False>
fut = None, sock = <socket.socket [closed] fd=-1, family=2, type=1, proto=6>
address = ('127.0.0.1', 6379)

    def _sock_connect_cb(self, fut, sock, address):
        if fut.done():
            return
    
        try:
            err = sock.getsockopt(socket.SOL_SOCKET, socket.SO_ERROR)
            if err != 0:
                # Jump to any except clause below.
>               raise OSError(err, f'Connect call failed {address}')
E               ConnectionRefusedError: [Errno 111] Connect call failed ('127.0.0.1', 6379)

../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/selector_events.py:691: ConnectionRefusedError

During handling of the above exception, another exception occurred:

self = <Coroutine test_esmerald_redis_cache>

    def setup(self) -> None:
        runner_fixture_id = f"_{self._loop_scope}_scoped_runner"
        if runner_fixture_id not in self.fixturenames:
            self.fixturenames.append(runner_fixture_id)
>       return super().setup()
               ^^^^^^^^^^^^^^^

../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:458: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:743: in pytest_fixture_setup
    hook_result = yield
                  ^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:313: in _asyncgen_fixture_wrapper
    result = runner.run(setup(), context=context)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/runners.py:118: in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.pyenv/versions/3.12.3/lib/python3.12/asyncio/base_events.py:687: in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/pytest_asyncio/plugin.py:309: in setup
    res = await gen_obj.__anext__()
          ^^^^^^^^^^^^^^^^^^^^^^^^^
tests/caches/conftest.py:41: in redis_cache
    await cache.async_client.flushdb()  # Ensure a clean test environment
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/client.py:720: in execute_command
    conn = self.connection or await pool.get_connection()
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:1198: in get_connection
    await self.ensure_connection(connection)
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:1231: in ensure_connection
    await connection.connect()
../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:298: in connect
    await self.connect_check_health(check_health=True)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <redis.asyncio.connection.Connection(host=localhost,port=6379,db=0)>
check_health = True, retry_socket_connect = True

    async def connect_check_health(
        self, check_health: bool = True, retry_socket_connect: bool = True
    ):
        if self.is_connected:
            return
        try:
            if retry_socket_connect:
                await self.retry.call_with_retry(
                    lambda: self._connect(), lambda error: self.disconnect()
                )
            else:
                await self._connect()
        except asyncio.CancelledError:
            raise  # in 3.7 and earlier, this is an Exception, not BaseException
        except (socket.timeout, asyncio.TimeoutError):
            raise TimeoutError("Timeout connecting to server")
        except OSError as e:
>           raise ConnectionError(self._error_message(e))
E           redis.exceptions.ConnectionError: Error 111 connecting to localhost:6379. Connect call failed ('127.0.0.1', 6379).

../../../.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/redis/asyncio/connection.py:317: ConnectionError
=============================== warnings summary ===============================
tests/cli/test_mail_directive.py::test_send_mail_directive
tests/cli/test_mail_directive.py::test_send_mail_directive
tests/cli/test_mail_directive.py::test_send_mail_directive
tests/cli/test_mail_directive.py::test_send_mail_directive_to_multiple
tests/cli/test_mail_directive.py::test_send_mail_directive_to_multiple
tests/cli/test_mail_directive.py::test_send_mail_directive_to_multiple
tests/cli/test_mail_directive.py::test_send_mail_directive_html
tests/cli/test_mail_directive.py::test_send_mail_directive_html
tests/cli/test_mail_directive.py::test_send_mail_directive_html
  /home/joao/.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/sayer/app.py:142: DeprecationWarning: 'protected_args' is deprecated and will be removed in Click 9.0. 'args' will contain remaining unparsed tokens.
    tokens = getattr(ctx, "protected_args", None)

tests/cli/test_mail_directive.py::test_send_mail_directive
tests/cli/test_mail_directive.py::test_send_mail_directive
tests/cli/test_mail_directive.py::test_send_mail_directive_to_multiple
tests/cli/test_mail_directive.py::test_send_mail_directive_to_multiple
tests/cli/test_mail_directive.py::test_send_mail_directive_html
tests/cli/test_mail_directive.py::test_send_mail_directive_html
  /home/joao/dev/workspace/lilya/lilya/cli/groups.py:66: DeprecationWarning: 'protected_args' is deprecated and will be removed in Click 9.0. 'args' will contain remaining unparsed tokens.
    args = [*ctx.protected_args, *ctx.args]

tests/contrib/cqrs/integration/test_lilya_integration_endpoints.py::test_post_invalid_json_is_error[asyncio]
tests/contrib/cqrs/integration/test_lilya_integration_endpoints.py::test_post_invalid_json_is_error[trio]
  /home/joao/.local/share/hatch/env/virtual/lilya/0RemWzaE/hatch-test.py3.12/lib/python3.12/site-packages/httpx/_models.py:408: DeprecationWarning: Use 'content=<...>' to upload raw bytes/text content.
    headers, stream = encode_request(

tests/contrib/mail/test_backends_file.py::test_file_backend_writes_eml[asyncio]
tests/contrib/mail/test_backends_file.py::test_subject_sanitization[asyncio]
tests/contrib/mail/test_backends_file.py::test_file_backend_serializes_attachments[asyncio]
tests/contrib/mail/test_backends_file.py::test_file_backend_writes_eml[trio]
tests/contrib/mail/test_backends_file.py::test_subject_sanitization[trio]
tests/contrib/mail/test_backends_file.py::test_file_backend_serializes_attachments[trio]
tests/contrib/mail/test_message.py::test_empty_subject_fallback_for_filebackend
  /home/joao/dev/workspace/lilya/lilya/contrib/mail/backends/file.py:55: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    timestamp = datetime.utcnow().strftime("%Y%m%d-%H%M%S-%f")

tests/environments/test_loader_yaml.py::test_handles_missing_files_gracefully
  /home/joao/dev/workspace/lilya/lilya/environments.py:395: UserWarning: EnvironLoader file '/tmp/pytest-of-joao/pytest-0/test_handles_missing_files_gra0/nonexistent.env' not found.
    env_file_values = self._read_env_file(env_file, strict)

tests/environments/test_loader_yaml.py::test_handles_missing_files_gracefully
  /home/joao/dev/workspace/lilya/lilya/environments.py:408: UserWarning: EnvironLoader file '/tmp/pytest-of-joao/pytest-0/test_handles_missing_files_gra0/nonexistent.yaml' not found.
    yaml_data = self._read_yaml_file(yaml_file, expansion_context, strict)

tests/environments/test_loader_yaml.py::test_duplicate_variables_warn_when_not_strict
  /home/joao/dev/workspace/lilya/tests/environments/test_loader_yaml.py:113: UserWarning: Duplicate variable 'PROJECT' in '/tmp/pytest-of-joao/pytest-0/test_duplicate_variables_warn_0/.env'.
    loader._read_env_file(env_file, strict=False)

tests/params/controllers/test_combined_params.py: 16 warnings
tests/params/controllers/test_cookie.py: 16 warnings
tests/params/test_combined_params.py: 16 warnings
tests/params/test_cookie.py: 14 warnings
tests/security/http/test_security_api_key_cookie.py: 1 warning
tests/security/http/test_security_api_key_cookie_description.py: 1 warning
tests/security/http/test_security_api_key_cookie_optional.py: 1 warning
tests/security/http/test_security_api_key_with_requires.py: 1 warning
tests/security/http/test_security_api_key_with_requires_injects.py: 1 warning
  /home/joao/dev/workspace/lilya/lilya/testclient/base.py:294: DeprecationWarning: Setting per-request cookies=<...> is being deprecated, because the expected behaviour on cookie persistence is ambiguous. Set cookies directly on the client instance instead.
    return super().request(

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html

---------- coverage: platform linux, python 3.12.3-final-0 -----------
Name                                                                   Stmts   Miss  Cover   Missing
----------------------------------------------------------------------------------------------------
lilya/__main__.py                                                          8      2    75%   4-5
lilya/_internal/_connection.py                                           121     11    91%   146-147, 152, 160, 169, 176, 180, 186, 192, 201, 210
lilya/_internal/_encoders.py                                             187     18    90%   89, 92-94, 119, 122, 130, 133, 172, 183, 191, 194, 249, 255, 293, 306, 308, 398
lilya/_internal/_encoding.py                                              24     15    38%   18-19, 22, 31, 44-55
lilya/_internal/_exception_handlers.py                                    67     13    81%   46, 65, 85-87, 94-95, 100, 106, 109, 179-181
lilya/_internal/_module_loading.py                                        14      4    71%   16-17, 23-24
lilya/_internal/_parsers.py                                              228     14    94%   27, 159-162, 329-331, 344-345, 497-498, 504-505
lilya/_internal/_path.py                                                  92      9    90%   38-39, 43, 212-219
lilya/_internal/_path_transformers.py                                     64      2    97%   96, 99
lilya/_internal/_representation.py                                        34     13    62%   17-26, 30-31, 54
lilya/_internal/_responses.py                                            502     57    89%   141-143, 152, 166, 246-250, 423-425, 433, 441-442, 449, 455-456, 463, 469-470, 480, 548, 558-562, 632, 635-636, 649, 654, 672, 698-699, 764, 795, 809-815, 828, 835-836, 838-839, 845, 946, 960, 963, 966, 1157, 1164-1168
lilya/_internal/_scopes.py                                                40     11    72%   66, 92, 101-111, 131
lilya/_utils.py                                                           29      9    69%   23, 25-26, 34-39, 49
lilya/apps.py                                                            253     22    91%   152, 173, 193, 372, 388, 399-401, 408-410, 453-456, 507, 535-536, 569, 587, 596, 611, 1307
lilya/authentication.py                                                  108     17    84%   81, 96-98, 117-119, 151-152, 159-166, 190, 194
lilya/caches/memory.py                                                    44      8    82%   66, 95-97, 119-120, 135-136
lilya/caches/redis.py                                                     56     16    71%   16-17, 42, 81, 95, 112, 120, 128-130, 144-145, 158-159, 171-172
lilya/cli/base.py                                                         41      6    85%   57-59, 66, 70, 76
lilya/cli/cli.py                                                          35      1    97%   85
lilya/cli/directives/operations/createapp.py                              20      2    90%   53-54
lilya/cli/directives/operations/mail.py                                   24      2    92%   49-50
lilya/cli/directives/operations/run.py                                    66      9    86%   74-78, 86-87, 110, 112, 153, 171-173
lilya/cli/directives/operations/runserver.py                              86     24    72%   18-37, 128, 136-145, 169-171
lilya/cli/directives/operations/shell/base.py                             30     15    50%   34-43, 49-58, 66-68
lilya/cli/directives/operations/shell/ipython.py                          32     32     0%   1-56
lilya/cli/directives/operations/shell/ptpython.py                         28     28     0%   1-50
lilya/cli/directives/operations/shell/utils.py                            48     48     0%   1-81
lilya/cli/directives/operations/show_urls.py                              74     53    28%   37-49, 60-72, 77-121
lilya/cli/env.py                                                         120     60    50%   68, 76, 107-129, 138, 147, 154, 160-220, 233-249
lilya/cli/groups.py                                                       58      6    90%   72-73, 93-96
lilya/cli/templates.py                                                   116     14    88%   52-53, 139, 143, 156, 163, 168-169, 196, 199, 208, 226-228
lilya/cli/terminal/base.py                                               268      5    98%   257, 265, 270, 279, 283
lilya/cli/terminal/print.py                                               17      8    53%   18-19, 27-28, 31-32, 40-41
lilya/cli/terminal/terminal.py                                            17     10    41%   13-14, 22-23, 31-32, 40-41, 44-45
lilya/cli/terminal/utils.py                                               17      3    82%   13-14, 17
lilya/cli/utils.py                                                       158     52    67%   60-61, 74-75, 92-93, 135-145, 148-154, 162, 171, 175-198, 218-219, 222-223, 226-227, 233-237
lilya/clientip.py                                                         40     10    75%   17-19, 37, 48-53, 59
lilya/compat.py                                                           42      3    93%   63-66
lilya/concurrency.py                                                      32      2    94%   47, 60
lilya/conf/__init__.py                                                    14      1    93%   38
lilya/conf/enums.py                                                       15      3    80%   6, 9, 26
lilya/conf/global_settings.py                                            175      7    96%   53, 182, 189, 227, 231, 234-236
lilya/context.py                                                         201     54    73%   77, 81, 85, 89, 93, 132, 178-179, 210-211, 247, 250, 253, 256, 259, 262, 265, 276-278, 281, 311, 314-317, 320, 323, 326-330, 353-355, 381-384, 396, 399, 412, 418, 422-425, 428-429, 440, 463-464, 475
lilya/contrib/mail/backends/base.py                                       15      3    80%   62, 75-76
lilya/contrib/mail/backends/console.py                                    30      6    80%   44, 46, 48, 58, 65-66
lilya/contrib/mail/backends/smtp.py                                      110     25    77%   23, 49, 51, 54, 58-59, 61, 66, 70-77, 81-86, 137, 157, 165, 250-254
lilya/contrib/mail/mailer.py                                              36      3    92%   61, 92, 106
lilya/contrib/mail/startup.py                                             16      2    88%   39, 52
lilya/contrib/multipart/form.py                                          235    187    20%   67, 71-73, 77-82, 86-90, 95, 99-105, 124-126, 130-133, 137-141, 145, 198-241, 251-315, 321-363, 369-397, 405-411, 415-420, 424, 455-468, 498-504
lilya/contrib/multipart/parsers.py                                       204     44    78%   60, 76, 113-118, 122-134, 138, 161, 185, 188, 190, 202, 217, 250, 252, 280, 282, 290, 295-296, 307, 316-317, 324-327, 354-355
lilya/contrib/multipart/utils.py                                          46     18    61%   70-75, 89-101
lilya/contrib/openapi/config.py                                           68      2    97%   392-393
lilya/contrib/openapi/datastructures.py                                   14      1    93%   78
lilya/contrib/openapi/decorator.py                                       120     16    87%   79, 82-87, 89, 117-119, 296, 303-306, 308, 328, 331
lilya/contrib/openapi/docs.py                                             17     10    41%   82-116, 128-153, 158-239
lilya/contrib/openapi/enums.py                                            26      6    77%   6, 9, 20, 23, 32, 35
lilya/contrib/openapi/helpers.py                                          36      5    86%   42, 48, 70-72
lilya/contrib/openapi/utils.py                                           137     13    91%   34-40, 109, 111, 116, 129, 132, 138, 157, 192
lilya/contrib/opentelemetry/instrumentation.py                            36      2    94%   45, 68
lilya/contrib/opentelemetry/middleware.py                                 76      9    88%   84-86, 100-101, 108-109, 115-116, 163
lilya/contrib/proxy/relay.py                                             232     63    73%   14-15, 211-214, 271-272, 282-283, 294-295, 345, 489-490, 571-601, 647-675, 704-707, 737, 779, 781, 869, 873, 881, 886
lilya/contrib/schedulers/asyncz/config.py                                 69      7    90%   75, 79-80, 119, 128, 207-208
lilya/contrib/schedulers/asyncz/decorator.py                              21      4    81%   64-66, 72
lilya/contrib/schedulers/base.py                                           9      2    78%   11, 14
lilya/contrib/security/csrf.py                                            43      1    98%   138
lilya/contrib/security/http/http.py                                      102      3    97%   87-91
lilya/contrib/security/oauth2/oauth.py                                    80      7    91%   142, 144, 153, 277, 369, 500, 623
lilya/contrib/security/scopes.py                                           8      8     0%   1-47
lilya/contrib/security/signed_urls.py                                     44      2    95%   119-121
lilya/contrib/sse/channels.py                                            106     29    73%   42-62, 124, 132-134, 138-140, 177, 192, 196, 219-223, 276, 291, 294
lilya/controllers.py                                                     173      7    96%   39-43, 273, 289-293
lilya/datastructures.py                                                  418     35    92%   49, 65, 90, 119, 126-127, 193-196, 250-251, 266, 298, 301, 304, 307, 379, 417-425, 693, 794, 841-848, 885
lilya/decorators.py                                                      108     17    84%   73, 103, 105, 112-113, 254-255, 267-268, 293-304
lilya/dependencies.py                                                    376     72    81%   24, 99-100, 157, 166, 197-198, 212, 217-218, 245-275, 321-322, 330-331, 368, 463-464, 471-472, 503, 505, 556, 559, 631, 641-642, 663-666, 700-701, 706, 736, 758, 834-836, 903-904, 912-926, 972, 979-982, 1009
lilya/enums.py                                                           117      5    96%   19, 22, 26, 63, 72
lilya/environments.py                                                    218     34    84%   17-22, 120, 134, 170-178, 201, 213, 242, 252, 285, 308-309, 331, 339, 382, 390, 405, 417, 481, 516, 519, 533, 538, 549, 552, 572-574, 578
lilya/exceptions.py                                                       99     22    78%   12-19, 24-25, 28, 31, 76-77, 86, 89-90, 139, 207-213
lilya/introspection/__builder.py                                         142     18    87%   45-49, 69-71, 152-156, 208, 310-316
lilya/introspection/_graph.py                                            142     16    89%   30, 38, 93, 104, 109, 133, 136, 158, 182, 200, 212, 238, 281, 293, 317, 337
lilya/lifecycle.py                                                        35      4    89%   161-166
lilya/logging.py                                                          53      4    92%   28-31, 103
lilya/middleware/app_settings.py                                          11     11     0%   1-25
lilya/middleware/asyncexit.py                                             38      6    84%   37, 50-52, 56, 59
lilya/middleware/authentication.py                                        59      1    98%   96
lilya/middleware/clickjacking.py                                          26      2    92%   27-28
lilya/middleware/compression.py                                          103      2    98%   103, 235
lilya/middleware/cors.py                                                 150      4    97%   204, 207, 210-211
lilya/middleware/csrf.py                                                 130     13    90%   122, 132-133, 149, 175-176, 186, 190, 202-204, 213-214
lilya/middleware/exceptions.py                                            72      7    90%   83-87, 141, 160, 166
lilya/middleware/global_context.py                                        35     35     0%   1-98
lilya/middleware/lilya_exception.py                                       67      6    91%   28-30, 34, 99, 115
lilya/middleware/security.py                                              51     10    80%   37-44, 106-107
lilya/middleware/session_context.py                                       39      4    90%   34-36, 43
lilya/middleware/session_fixing.py                                        44     10    77%   27, 39-40, 44-46, 51-52, 76-77
lilya/middleware/trustedreferrer.py                                       49      2    96%   59-60
lilya/middleware/wsgi.py                                                  53     26    51%   19-20, 67-73, 85, 103-136, 209-219
lilya/permissions/base.py                                                 26      1    96%   33
lilya/permissions/deny_all.py                                              8      8     0%   1-11
lilya/protocols/authentication.py                                          5      5     0%   1-8
lilya/protocols/cache.py                                                  13      3    77%   33, 55, 71
lilya/ranges.py                                                           83      5    94%   40, 77, 81, 132-133
lilya/requests.py                                                        171      9    95%   116-118, 244-245, 257-260
lilya/responses.py                                                       716     52    93%   77, 104, 130, 142-144, 163-166, 178, 185, 197, 199, 358, 402, 406, 457, 472, 560, 579, 697, 725-727, 735-736, 792-799, 827, 870-871, 919, 922, 936, 981, 991, 998, 1022-1023, 1068, 1074, 1088-1093, 1293, 1452, 1465, 1529, 1534, 1546
lilya/routing.py                                                         875    101    88%   184, 219-220, 274-275, 420-421, 449, 452, 496, 663-669, 672, 676-683, 772-775, 782-786, 796-815, 843, 905-911, 916-924, 941, 1021, 1053, 1067, 1133-1139, 1144-1152, 1168, 1226, 1449, 1459, 1619-1620, 1625, 1654, 1666, 1706-1707, 1709-1711, 1757-1772, 1778-1779, 1857-1861, 1968, 2183, 2226, 2297, 2326, 2707, 2732
lilya/serializers.py                                                      65      6    91%   69, 76, 108-109, 147, 152
lilya/templating/base.py                                                  21      1    95%   25
lilya/templating/controllers.py                                          142     15    89%   45-48, 88-89, 208, 317, 327-335, 463, 466, 506
lilya/templating/jinja.py                                                 76      7    91%   25-27, 164-165, 223-224
lilya/testclient/_internal/transport.py                                  301     76    75%   84-85, 183-186, 331-333, 335, 337-348, 374, 394-396, 405, 409, 413, 417, 483-484, 549-550, 573-576, 613, 704-731, 747, 753-755, 759-761, 766-768, 778, 782, 786, 790, 796-797
lilya/testclient/_internal/utils.py                                       19      3    84%   23, 26-27
lilya/testclient/_internal/websockets.py                                 119     10    92%   172-181
lilya/testclient/async_client.py                                         135     19    86%   94-95, 113-118, 183, 239, 244, 300, 313, 326, 352, 365, 399, 426, 507, 513, 528, 535
lilya/testclient/base.py                                                 182     24    87%   108-109, 186, 198, 278, 459, 536-546, 569-570, 582-583, 644-651
lilya/testclient/helpers.py                                               22      4    82%   89-90, 163-164
lilya/websockets.py                                                      125      5    96%   58, 74, 203-205
tests/app_settings/test_settings.py                                      162      1    99%   15
tests/authentication/test_authentication_backend.py                      155      5    97%   112-113, 172, 182-183
tests/authentication/test_authentication_middleware.py                    83     22    73%   32-43, 72, 88, 103-114
tests/caches/conftest.py                                                  55     26    53%   17-18, 43-50, 57-61, 67-83, 89
tests/caches/test_core.py                                                 30     10    67%   22-28, 46-52
tests/caches/test_decorator.py                                           140     42    70%   29-38, 52-58, 74-82, 100-106, 131, 211-231
tests/caches/test_integration.py                                          31     27    13%   6-22, 28-45
tests/cli/conftest.py                                                     16      3    81%   17-19
tests/cli/global_context/test_global_context_with_directive.py            45      2    96%   37-38
tests/cli/myproject/myproject/app.py                                      15      7    53%   18-36
tests/cli/simple/test_createdeployment.py                                 60      2    97%   21, 37
tests/cli/simple/test_createproject_with_deployment.py                    69      1    99%   21
tests/cli/simple/test_createproject_with_deployment_folder_name.py        69      1    99%   21
tests/cli/simple/test_custom_directive.py                                 70     50    29%   16-45, 52-53, 60-62, 66-69, 73-101
tests/cli/simple/test_custom_directive_decorator.py                       70     50    29%   16-45, 52-53, 60-62, 66-69, 73-101
tests/cli/simple/test_directives.py                                       58      3    95%   24, 41-42
tests/cli/test_createapp_with_version.py                                  61      2    97%   22-23
tests/cli/test_createdeployment.py                                        58      2    97%   21-22
tests/cli/test_createdeployment_isolated.py                               52      4    92%   21-22, 36-37
tests/cli/test_createdeployment_isolated_with_different_name.py           60      2    97%   44-45
tests/cli/test_createdeployment_with_different_name.py                    58      4    93%   21-22, 36-37
tests/cli/test_createproject.py                                           98      3    97%   22, 42-43
tests/cli/test_createproject_edgy.py                                      72      2    97%   36-37
tests/cli/test_createproject_with_deployment.py                           76      2    97%   38-39
tests/cli/test_createproject_with_deployment_folder_name.py               76      2    97%   38-39
tests/cli/test_createproject_with_location.py                             71      2    97%   38-39
tests/cli/test_custom_directive.py                                        69     49    29%   16-45, 52-53, 60-62, 66-71, 75-105
tests/cli/test_custom_directive_decorator.py                              69     49    29%   16-45, 52-53, 60-62, 66-71, 75-105
tests/cli/test_custom_directive_decorator_on_cli.py                       48      2    96%   39-40
tests/cli/test_custom_directive_normal.py                                 44      2    95%   35-36
tests/cli/test_directives.py                                              56      2    96%   39-40
tests/cli/test_mail_directive.py                                          59      2    97%   35-36
tests/cli/test_runserver.py                                              173     26    85%   19-48
tests/cli/user.py                                                         29      7    76%   38-40, 47-52
tests/contrib/cqrs/test_envelope_roundtrip.py                             46      3    93%   16-17, 20
tests/contrib/cqrs/test_middleware_pipeline.py                            64      1    98%   97
tests/contrib/cqrs/test_registry.py                                       33      2    94%   14, 18
tests/contrib/mail/test_mail_dependencies.py                              83      2    98%   48, 127
tests/contrib/opentelemetry/reset.py                                       9      1    89%   19
tests/contrib/opentelemetry/test_instrumentation.py                       75     10    87%   18, 64, 103, 105, 109-111, 115-117
tests/contrib/opentelemetry/test_opentelemetry_middleware.py             149      1    99%   119
tests/contrib/proxy/conftest.py                                           74      5    93%   24-25, 46-47, 107
tests/contrib/proxy/test_relay.py                                        166      4    98%   125-129, 221
tests/contrib/schedulers/asyncz/test_scheduler.py                         51      2    96%   207, 224
tests/contrib/shortcuts/test_shortcuts.py                                149      1    99%   110
tests/contrib/sse/test_channels.py                                       140      1    99%   137
tests/dependencies/controllers/test_dependencies.py                      184      2    99%   133, 364
tests/dependencies/controllers/test_dependencies_without_provides.py     186      1    99%   377
tests/dependencies/controllers/test_wrap_dependency.py                   184      2    99%   144, 357
tests/dependencies/overrides/test_dependency_overrides.py                 87      4    95%   18, 45, 75, 148
tests/dependencies/resolve/controllers/test_resolve.py                    34      2    94%   23, 27
tests/dependencies/resolve/test_resolve.py                                31      2    94%   22, 26
tests/dependencies/resolve/test_simple_websocket.py                       21      1    95%   17
tests/dependencies/scopes/test_dependency_scopes.py                       96      3    97%   19-20, 23
tests/dependencies/scopes/test_depends_and_inject_integration.py         198     12    94%   49-56, 136, 174, 202, 260, 271, 286
tests/dependencies/scopes/test_provide_and_provides.py                   147      1    99%   114
tests/dependencies/test_dependencies.py                                  211      2    99%   123, 328
tests/dependencies/test_dependencies_without_provides.py                 205      1    99%   319
tests/dependencies/test_depends_pure.py                                  180     24    87%   26-33, 37-44, 48-55, 139, 180, 213, 256, 267, 282
tests/dependencies/test_wrap_dependency.py                               197      2    99%   123, 306
tests/encoders/controllers/test_infer_body_error.py                       30      1    97%   52
tests/encoders/controllers/test_infer_body_simple_validation.py           16      1    94%   16
tests/encoders/test_encoders_interface.py                                 44      1    98%   18
tests/encoders/test_encoders_with_complex_dependency.py                   81      3    96%   29, 32, 37
tests/encoders/test_infer_body_error.py                                   28      1    96%   50
tests/encoders/test_infer_body_simple_validation.py                       14      1    93%   14
tests/environments/test_environments.py                                  159      3    98%   16, 22, 25
tests/exception_handlers/test_raises_exception_in_middleware.py           32      1    97%   30
tests/forms/test_form_controller.py                                      183      3    98%   50, 70-71
tests/introspection/test_graph.py                                        147     10    93%   38, 43, 47, 113, 121, 143, 169, 174, 215-216
tests/lifecycle/test_lifecycle_hooks.py                                   46      1    98%   77
tests/lifecycle/test_lifecycle_nested_routers.py                          32      2    94%   32, 35
tests/lifespan/test_apps.py                                              252      3    99%   387-389
tests/lifespan/test_apps_from_settings.py                                123     22    82%   20, 24, 28, 32, 36, 41, 45, 49-50, 54, 58, 62-64, 68-69, 77-78, 82, 211-213
tests/middleware/bypass/wsgi.py                                           46     46     0%   1-124
tests/middleware/test_authentication_middleware.py                        53      2    96%   40, 66
tests/middleware/test_clientip.py                                         44      4    91%   19-21, 30
tests/middleware/test_create_middleware.py                                17      3    82%   8-9, 18
tests/middleware/test_permission_with_middleware.py                      103      3    97%   53, 71, 92
tests/middleware/test_session_fixing.py                                   47      2    96%   28-29
tests/openapi/controllers/test_openapi.py                                507     58    89%   16, 20, 24, 46, 81, 98, 123, 151, 171, 187, 212, 227, 241, 257, 271, 285, 299, 315, 336, 351, 369, 390, 411, 415, 431, 446, 475, 490, 513, 532, 547, 570, 588, 609, 614, 631, 648, 662, 675, 692, 708, 712, 730, 744, 761, 780, 806, 826, 841, 856, 870, 884, 899, 904, 930, 945, 961, 966
tests/openapi/controllers/test_responses.py                               31      2    94%   32, 130
tests/openapi/controllers/test_responses_as_list.py                       21      1    95%   31
tests/openapi/controllers/test_responses_as_tuple.py                      21      1    95%   31
tests/openapi/test_openapi.py                                            456     55    88%   13, 17, 21, 59, 73, 88, 112, 139, 156, 171, 195, 209, 222, 237, 250, 263, 276, 289, 305, 319, 335, 353, 370, 394, 420, 434, 456, 487, 503, 517, 537, 552, 571, 575, 588, 604, 617, 629, 642, 657, 672, 685, 698, 716, 741, 760, 774, 788, 801, 814, 828, 832, 853, 878, 882
tests/openapi/test_responses.py                                           20      1    95%   30
tests/openapi/test_responses_as_list.py                                   20      1    95%   30
tests/openapi/test_responses_as_tuple.py                                  20      1    95%   30
tests/params/controllers/test_combined_params.py                          62      1    98%   38
tests/params/controllers/test_cookie.py                                   85      4    95%   28, 38, 71, 76
tests/params/controllers/test_headers.py                                  83      4    95%   28, 38, 146, 160
tests/params/controllers/test_query_params.py                            124      3    98%   135, 162, 167
tests/params/test_combined_params.py                                      57      1    98%   33
tests/params/test_cookie.py                                               60      2    97%   25, 33
tests/params/test_headers.py                                              72      4    94%   25, 33, 141, 154
tests/params/test_query_params.py                                        117      2    98%   140, 175
tests/permissions/test_create_permission.py                               17      3    82%   8-9, 18
tests/permissions/test_permissions.py                                    151      1    99%   20
tests/permissions/test_permissions_in_wrap.py                            102      1    99%   16
tests/routing/test_path_for.py                                            21     12    43%   6, 10, 14-15, 19-20, 24-25, 34, 38-40
tests/routing/test_routing.py                                            629      2    99%   729-730
tests/routing/test_routing_fall_through.py                                72      5    93%   19, 23-24, 43-44
tests/routing/test_routing_with_lt_gt_syntax.py                          629      2    99%   730-731
tests/security/http/test_security_api_key_header.py                       35      1    97%   29
tests/security/http/test_security_api_key_query.py                        35      1    97%   29
tests/security/http/test_security_api_key_query_description.py            35      1    97%   28
tests/security/http/test_security_api_key_with_requires_injects.py        37      1    97%   29
tests/security/http/test_security_http_base.py                            27      1    96%   19
tests/security/http/test_security_http_basic_realm.py                     43      1    98%   18
tests/security/http/test_security_http_basic_realm_description.py         43      1    98%   18
tests/security/oauth/test_oauth_code_bearer.py                            30      4    87%   31-38
tests/settings.py                                                         22      1    95%   20
tests/templates/test_context_processors.py                               155      1    99%   211
tests/templates/test_templates.py                                        229      1    99%   313
tests/test_client_auth.py                                                124     10    92%   32-44
tests/test_controllers.py                                                227      9    96%   217, 220, 234, 237, 281, 315-316, 329-330
tests/test_logging.py                                                    150     12    92%   51, 54, 60, 131, 134, 157-158, 211-212, 221-222, 248
tests/test_responses.py                                                  962      3    99%   60, 67, 1372
tests/transformers/test_transformers_not_instance.py                      62      4    94%   23, 26, 33, 36
----------------------------------------------------------------------------------------------------
TOTAL                                                                  33484   2744    92%

292 files skipped due to complete coverage.
Coverage HTML written to dir htmlcov

=========================== short test summary info ============================
ERROR tests/caches/test_core.py::test_redis_cache_basic_operations - redis.ex...
ERROR tests/caches/test_core.py::test_redis_cache_ttl_expiry - redis.exceptio...
ERROR tests/caches/test_decorator.py::test_basic_caching_memory_redis - redis...
ERROR tests/caches/test_decorator.py::test_cache_expiry_redis - redis.excepti...
ERROR tests/caches/test_decorator.py::test_cache_key_generation_redis - redis...
ERROR tests/caches/test_decorator.py::test_cache_invalidation_redis - redis.e...
ERROR tests/caches/test_decorator.py::test_lilya_integration_in_redis - redis...
ERROR tests/caches/test_integration.py::test_esmerald_memory_cache - redis.ex...
ERROR tests/caches/test_integration.py::test_esmerald_redis_cache - redis.exc...
= 3150 passed, 4 skipped, 2 xfailed, 94 warnings, 9 errors in 226.80s (0:03:46) =
