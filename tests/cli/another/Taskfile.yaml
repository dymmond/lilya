version: 3

tasks:
  clean:
    desc: Cleans caching, pyc and pycache files
    cmds:
      - find . -type f -name "*.pyc" -delete || true
      - find . -type d -name "*__pycache__*" -delete

  run:
    desc: Starts another in development mode
    env:
      LILYA_SETTINGS_MODULE: another.configs.development.settings.DevelopmentAppSettings
    cmds:
      - lilya runserver --reload

  requirements:
    desc: Install requirements
    cmds:
      - pip install -e .[dev,test]

  test:
    desc: Run the suite of tests
    env:
      LILYA_SETTINGS_MODULE: another.configs.testing.settings.TestingAppSettings
    cmds:
      - pytest -s
